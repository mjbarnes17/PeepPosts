<template name="posts">
  {{ #if currentUser }}
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-info btn-lg center" data-toggle="modal" data-target="#postModal">
      Talk about something!
    </button>
  {{ /if }}
  <!-- Modal -->
  <div class="modal fade" id="postModal" tabindex="-1" role="dialog" aria-labelledby="myPostModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myPostModalLabel">Create a new post!</h4>
        </div>
        <div class="modal-body">
          {{ #autoForm collection="Posts" id="insertPostForm" type="insert" }}
          {{ > afQuickField name="body" rows=5 }}
          <button type="submit" class="btn btn-success">Post</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          {{ /autoForm }}
        </div>
      </div>
    </div>
  </div>
  <hr>
  {{ #each posts }}
  <div class="row post">
    <div class="col-md-2 col-sm-3 text-center">
      <img src="{{ getProfileImage userId }}" class="profile-image img-circle">
    </div>
    <div class="col-md-10 col-sm-9">
      <small>Posted by <strong>{{ username }}</strong> &#64; <i>{{ createdAt }}</i> </small>
      <p>{{ body }}</p>
    </div>
  </div>
  {{ else }}
    <p>
      No Posts
    </p>
  {{ /each }}
</template>
